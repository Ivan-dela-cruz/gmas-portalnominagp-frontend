"use strict";(self.webpackChunkgmas_nomina_balcon=self.webpackChunkgmas_nomina_balcon||[]).push([[297],{22281:(e,a,t)=>{t.d(a,{A:()=>u});var i=t(48738),n=t.n(i),s=t(9950),o=t(44089),d=t(97937),r=t(44414);const l=()=>{},c=s.forwardRef(((e,a)=>{let{bsPrefix:t,name:i,className:s,checked:c,type:u,onChange:m,value:h,disabled:f,id:v,inputRef:p,...x}=e;return t=(0,o.oU)(t,"btn-check"),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{className:t,name:i,type:u,value:h,ref:p,autoComplete:"off",checked:!!c,disabled:!!f,onChange:m||l,id:v}),(0,r.jsx)(d.A,{...x,ref:a,className:n()(s,f&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:v})]})}));c.displayName="ToggleButton";const u=c},66914:(e,a,t)=>{t.d(a,{A:()=>l});var i=t(48738),n=t.n(i),s=t(9950),o=t(44089),d=t(44414);const r=s.forwardRef(((e,a)=>{let{bsPrefix:t,size:i,vertical:s=!1,className:r,role:l="group",as:c="div",...u}=e;const m=(0,o.oU)(t,"btn-group");let h=m;return s&&(h=`${m}-vertical`),(0,d.jsx)(c,{...u,ref:a,role:l,className:n()(r,h,i&&`${m}-${i}`)})}));r.displayName="ButtonGroup";const l=r},83968:(e,a,t)=>{t.d(a,{U:()=>i});const i=e=>({S:"Confirmada",R:"Rechazada",N:"Pendiente"}[e]||"Desconocido")},91739:(e,a,t)=>{t.r(a),t.d(a,{default:()=>w});var i=t(9950),n=t(86781),s=t(97937),o=t(66914),d=t(22281),r=t(89288),l=t(47553),c=t(4695),u=t.n(c),m=t(32761),h=t(68244),f=t(16439),v=t(45834),p=t(83968);const x=[{headerName:"Identificaci\xf3n",field:"employeeIdentification",width:210,filter:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,headerCheckboxSelection:!0},{headerName:"Nombres",field:"employeeName",filter:!0,width:320},{headerName:"Fecha inicio",field:"startDate",valueFormatter:e=>new Date(e.value).toLocaleDateString(),filter:!0,width:180},{headerName:"Fecha fin",field:"endDate",valueFormatter:e=>new Date(e.value).toLocaleDateString(),filter:!0,width:180},{headerName:"D\xedas solicitados",field:"vacationDays",filter:!0},{headerName:"Estado",field:"isConfirmed",filter:!0,valueGetter:e=>(0,p.U)(e.data.isConfirmed),valueFormatter:e=>(0,p.U)(e.data.isConfirmed),width:150}];var b=t(44414);const j="id-search-request-accept",w=()=>{const{formatMessage:e}=(0,r.A)(),[a,t]=(0,i.useState)(!1),[c,p]=(0,i.useState)("N"),w=(0,i.useRef)(),[g,y]=(0,f.jS)(a,c),N=(0,i.useCallback)((()=>{w.current.api.setQuickFilter(document.getElementById(j).value||"")}),[]);(0,i.useEffect)((()=>{}),[g,y]);const C=async i=>{const n=w.current.api.getSelectedRows(),s=(null===n||void 0===n?void 0:n.filter((e=>"N"===e.isConfirmed)))||[];if(!s.length)return void u().fire({icon:"warning",title:e({id:"swal.noSelectionTitle"}),text:e({id:"swal.noSelectionText"})});if(!(await u().fire({title:e({id:`swal.confirm.${i}.title`}),text:e({id:`swal.confirm.${i}.text`}),icon:"question",showCancelButton:!0,confirmButtonText:e({id:"swal.btnConfirm"}),cancelButtonText:e({id:"swal.btnCancel"})})).isConfirmed)return;let o="";if("Reject"===i){const a=await u().fire({title:e({id:"swal.rejectReason.title"}),input:"textarea",inputPlaceholder:e({id:"swal.rejectReason.placeholder"}),inputAttributes:{"aria-label":e({id:"swal.rejectReason.ariaLabel"})},showCancelButton:!0,confirmButtonText:e({id:"swal.btnSend"}),cancelButtonText:e({id:"swal.btnCancel"}),inputValidator:a=>{if(!a)return e({id:"swal.rejectReason.validation"})}});if(!a.isConfirmed)return;o=a.value}const d={tokenToApprove:"notused",tokenToDeny:"notused",credentialKey:"notused",observation:o,action:i,ids:s.map((e=>e.id))};try{document.body.classList.add("spinner");const n=await v.EB.post("/VacationRequests/Approve/Massive",d).catch((e=>(document.body.classList.remove("spinner"),e)));var r;if(document.body.classList.remove("spinner"),null!==n&&void 0!==n&&n.data)u().fire({icon:"success",title:e({id:"swal.successTitle"}),text:(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||e({id:`swal.successText.${i}`})}),w.current.api.deselectAll();t(!a)}catch(m){var l,c;document.body.classList.remove("spinner"),u().fire({icon:"error",title:e({id:"swal.errorTitle"}),text:(null===m||void 0===m||null===(l=m.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.message)||e({id:"swal.errorText"})})}};return y?(0,b.jsx)(h.Bf,{}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"container mt-0 ",children:(0,b.jsxs)(n.A,{children:[(0,b.jsx)("h3",{className:"mb-2",children:e({id:"vacation.pendingRequestsTitle"})}),(0,b.jsxs)("div",{className:"m-0 w-100 d-flex justify-content-between",children:[(0,b.jsx)("div",{className:"w-md-50 w-lg-25 w-50 ",children:(null===g||void 0===g?void 0:g.length)>0?(0,b.jsxs)("div",{className:"input-group  mb-2",children:[(0,b.jsx)("span",{className:"input-group-text border-0 bg-primary text-white",id:"search-addon",children:(0,b.jsx)(l.A,{icon:"search"})}),(0,b.jsx)("input",{id:j,onInput:N,type:"search",className:"form-control",placeholder:"Buscar ...","aria-label":"Search","aria-describedby":"search-addon"})]}):(0,b.jsx)("div",{})}),(0,b.jsxs)("div",{className:"w-md-50 w-lg-25 w-50 d-flex justify-content-end",children:[(null===g||void 0===g?void 0:g.length)>0&&(0,b.jsxs)("div",{className:"d-flex justify-content-end pb-1",children:[(0,b.jsxs)(s.A,{size:"sm",variant:"info",className:"mt-1 btn-icon btn-icon-start",onClick:()=>C("Approve"),children:[(0,b.jsx)(l.A,{icon:"check-circle"})," \xa0",(0,b.jsx)("span",{children:e({id:"vacation.btnApprove"})})]}),(0,b.jsxs)(s.A,{size:"sm",variant:"danger",className:"mt-1 mx-2  btn-icon btn-icon-start",onClick:()=>C("Reject"),children:[(0,b.jsx)(l.A,{icon:"close"})," \xa0",(0,b.jsx)("span",{children:e({id:"vacation.btnReject"})})]})]}),(0,b.jsx)("div",{className:"d-flex justify-content-end align-items-center pb-1",children:(0,b.jsxs)(o.A,{size:"sm","aria-label":"Basic radio toggle button group",children:[(0,b.jsx)(d.A,{id:"radioSecondary1",type:"radio",variant:"outline-secondary",name:"radioSecondary",value:"",checked:""===c,onChange:()=>p(""),children:"Todos"}),(0,b.jsx)(d.A,{id:"radioSecondary2",type:"radio",variant:"outline-secondary",name:"radioSecondary",value:"S",checked:"S"===c,onChange:()=>p("S"),children:"Confirmados"}),(0,b.jsx)(d.A,{id:"radioSecondary3",type:"radio",variant:"outline-secondary",name:"radioSecondary",value:"N",checked:"N"===c,onChange:()=>p("N"),children:"Pendientes"}),(0,b.jsx)(d.A,{id:"radioSecondary4",type:"radio",variant:"outline-secondary",name:"radioSecondary",value:"R",checked:"R"===c,onChange:()=>p("R"),children:"Rechazados"})]})})]})]}),(null===g||void 0===g?void 0:g.length)>0?(0,b.jsx)(m.JR,{isStudent:!0,pageSize:10,pagination:!0,heightGrid:"70vh",gridRef:w,floatingFilter:!0,columns:x,data:g||[]}):(0,b.jsx)("div",{className:"row m-0",children:(0,b.jsx)(h.eG,{text:"\xa1Nada que mostrar!"})})]})})})}}}]);