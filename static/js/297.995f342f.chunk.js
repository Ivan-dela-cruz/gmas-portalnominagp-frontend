"use strict";(self.webpackChunkgmas_nomina_balcon=self.webpackChunkgmas_nomina_balcon||[]).push([[297],{91739:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var a=i(9950),n=i(86781),s=i(97937),l=i(89288),c=i(47553),o=i(4695),r=i.n(o),d=i(32761),u=i(68244),m=i(69248),h=i(45834);const f=[{headerName:"Identificaci\xf3n",field:"employeeIdentification",width:210,filter:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,headerCheckboxSelection:!0},{headerName:"Nombres",field:"employeeName",filter:!0,width:320},{headerName:"Fecha inicio",field:"startDate",valueFormatter:e=>new Date(e.value).toLocaleDateString(),filter:!0,width:180},{headerName:"Fecha fin",field:"endDate",valueFormatter:e=>new Date(e.value).toLocaleDateString(),filter:!0,width:180},{headerName:"D\xedas solicitados",field:"vacationDays",filter:!0}];var p=i(44414);const v="id-search-request-accept",x=()=>{const{formatMessage:e}=(0,l.A)(),[t,i]=(0,a.useState)(!1),o=(0,a.useRef)(),[x,w]=(0,m.jS)(t),b=(0,a.useCallback)((()=>{o.current.api.setQuickFilter(document.getElementById(v).value||"")}),[]);(0,a.useEffect)((()=>{console.log(x)}),[x,w]);const j=async a=>{const n=o.current.api.getSelectedRows();if(!n.length)return void r().fire({icon:"warning",title:e({id:"swal.noSelectionTitle"}),text:e({id:"swal.noSelectionText"})});if(!(await r().fire({title:e({id:`swal.confirm.${a}.title`}),text:e({id:`swal.confirm.${a}.text`}),icon:"question",showCancelButton:!0,confirmButtonText:e({id:"swal.btnConfirm"}),cancelButtonText:e({id:"swal.btnCancel"})})).isConfirmed)return;let s="";if("Reject"===a){const t=await r().fire({title:e({id:"swal.rejectReason.title"}),input:"textarea",inputPlaceholder:e({id:"swal.rejectReason.placeholder"}),inputAttributes:{"aria-label":e({id:"swal.rejectReason.ariaLabel"})},showCancelButton:!0,confirmButtonText:e({id:"swal.btnSend"}),cancelButtonText:e({id:"swal.btnCancel"}),inputValidator:t=>{if(!t)return e({id:"swal.rejectReason.validation"})}});if(!t.isConfirmed)return;s=t.value}const l={tokenToApprove:"notused",tokenToDeny:"notused",credentialKey:"notused",observation:s,action:a,ids:n.map((e=>e.id))};try{document.body.classList.add("spinner");const n=await h.EB.post("/VacationRequests/Approve/Massive",l).catch((e=>(document.body.classList.remove("spinner"),e)));var c;if(document.body.classList.remove("spinner"),null!==n&&void 0!==n&&n.data)r().fire({icon:"success",title:e({id:"swal.successTitle"}),text:(null===n||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||e({id:`swal.successText.${a}`})}),o.current.api.deselectAll();i(!t)}catch(m){var d,u;document.body.classList.remove("spinner"),r().fire({icon:"error",title:e({id:"swal.errorTitle"}),text:(null===m||void 0===m||null===(d=m.response)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.message)||e({id:"swal.errorText"})})}};return w?(0,p.jsx)(u.Bf,{}):(0,p.jsx)(p.Fragment,{children:0===(null===x||void 0===x?void 0:x.length)?(0,p.jsx)(u.eG,{}):(0,p.jsx)("div",{className:"container mt-0 ",children:(0,p.jsxs)(n.A,{children:[(0,p.jsx)("h3",{className:"mb-2",children:e({id:"vacation.pendingRequestsTitle"})}),(0,p.jsxs)("div",{className:"m-0 w-100 d-flex justify-content-between",children:[(0,p.jsx)("div",{className:"w-md-50 w-lg-25 w-50 ",children:(0,p.jsxs)("div",{className:"input-group  mb-2",children:[(0,p.jsx)("span",{className:"input-group-text border-0 bg-primary text-white",id:"search-addon",children:(0,p.jsx)(c.A,{icon:"search"})}),(0,p.jsx)("input",{id:v,onInput:b,type:"search",className:"form-control",placeholder:"Buscar ...","aria-label":"Search","aria-describedby":"search-addon"})]})}),(0,p.jsxs)("div",{className:"w-md-50 w-lg-25 w-50 d-flex justify-content-end",children:[(0,p.jsxs)(s.A,{variant:"info",className:"mx-1 btn-icon btn-icon-start",onClick:()=>j("Approve"),children:[(0,p.jsx)(c.A,{icon:"check-circle"})," \xa0",(0,p.jsx)("span",{children:e({id:"vacation.btnApprove"})})]}),(0,p.jsxs)(s.A,{variant:"danger",className:"btn-icon btn-icon-start",onClick:()=>j("Reject"),children:[(0,p.jsx)(c.A,{icon:"close"})," \xa0",(0,p.jsx)("span",{children:e({id:"vacation.btnReject"})})]})]})]}),(0,p.jsx)(d.JR,{isStudent:!0,pageSize:10,pagination:!0,heightGrid:"70vh",gridRef:o,floatingFilter:!0,columns:f,data:x||[]})]})})})}}}]);